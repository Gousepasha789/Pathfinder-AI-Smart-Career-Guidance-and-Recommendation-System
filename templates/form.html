<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>PathFinder AI - Career Questionnaire</title>

  <!-- Vendor CSS -->
  <link href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='vendor/aos/aos.css') }}" rel="stylesheet" />
  <link href="{{ url_for('static', filename='css/main.css') }}" rel="stylesheet" />

  <style>
    :root{
      --pf-primary:#007bff;
      --pf-dark:#0e2a47;
      --pf-muted:#6b7280;
      --pf-bg1:#f5f8ff;
      --pf-bg2:#eef2ff;
      --pf-card:#ffffff;
      --pf-soft:#cdd8ff;
      --pf-success:#28a745;
      --pf-gray:#e5e7eb;
      --radius:16px;
    }

    body{
      background: linear-gradient(135deg, var(--pf-bg1), var(--pf-bg2));
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      color:#333;
      overflow-x:hidden;
    }

    /* Header */
    header#header{
      background-color:#fff;
      box-shadow:0 2px 10px rgba(14,42,71,0.06);
      backdrop-filter: saturate(1.2) blur(4px);
    }
    .sitename{font-size:1.8rem;font-weight:800;color:#0056d2!important;letter-spacing:.3px}

    /* Card */
    .form-wrapper{
      background:var(--pf-card);
      border-radius:24px;
      box-shadow:0 20px 60px rgba(14,42,71,0.10);
      padding:40px 28px;
      max-width:1024px;
      margin:120px auto 80px;
      animation:cardIn .6s ease both;
    }
    @keyframes cardIn{
      from{opacity:0; transform:translateY(18px) scale(.98)}
      to{opacity:1; transform:translateY(0) scale(1)}
    }

    .form-title{
      text-align:center;
      font-weight:800;
      color:var(--pf-dark);
      letter-spacing:.2px;
    }

    /* Step indicator + progress */
    #stepIndicator{
      font-weight:700;
      color:#0b4cc9;
    }
    .progress{height:10px;border-radius:999px;background:#edf2ff}
    .progress-bar{
      background:linear-gradient(90deg,var(--pf-primary),#5c9dff);
      border-radius:999px;
      transition:width .35s ease;
    }

    /* Sections */
    .section-header{
      font-weight:700;
      font-size:20px;
      color:#093a86;
      display:inline-flex;
      align-items:center;
      gap:10px;
      margin:8px 0 14px;
    }
    .section-header .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--pf-primary);box-shadow:0 0 0 6px rgba(0,123,255,.12);
    }

    .question-box{
      background:#f7f9ff;
      border:1px solid var(--pf-soft);
      border-radius:var(--radius);
      padding:22px 18px;
      box-shadow:0 6px 20px rgba(0,0,0,.04);
      max-height:280px;
      overflow-y:auto;
      transition: box-shadow .25s ease, transform .2s ease;
    }
    .question-box:hover{ box-shadow:0 10px 28px rgba(0,0,0,.06) }

    /* Fancy appear */
    .form-section{
      display:none;
      animation: fadeSlide .45s ease both;
    }
    .form-section.active{ display:block; }
    @keyframes fadeSlide{
      from{ opacity:0; transform: translateY(12px) }
      to{ opacity:1; transform: translateY(0) }
    }

    /* Inputs */
    .form-control,.form-select{
      border-radius:12px;
      padding:12px 14px;
      border:1px solid #d6dcef;
      transition: all .25s ease;
      box-shadow:none;
    }
    .form-control:focus,.form-select:focus{
      border-color:var(--pf-primary);
      box-shadow:0 0 0 6px rgba(0,123,255,.12);
    }

    /* Checkbox grid */
    .opt-col{ margin-bottom:8px; }
    .opt-col input{ transform:translateY(1px); }
    .opt-col label{ margin-left:8px; color:#1f2a44; cursor:pointer; }

    /* Nav buttons */
    .form-navigation{ display:flex; justify-content:center; gap:10px; margin-top:18px; }
    .btn{
      border:none; border-radius:12px; padding:12px 26px; font-weight:700; letter-spacing:.2px;
      transition: transform .06s ease, box-shadow .25s ease, background .25s ease;
    }
    .btn:active{ transform: translateY(1px) }
    .btn-next{ background:var(--pf-primary); color:#fff; box-shadow:0 10px 20px rgba(0,123,255,.18) }
    .btn-next:hover{ background:#0a62ea }
    .btn-prev{ background:#8794a6; color:#fff; box-shadow:0 10px 20px rgba(135,148,166,.20) }
    .btn-prev:hover{ background:#727f8f }
    .btn-submit{ background:var(--pf-success); color:#fff; box-shadow:0 10px 20px rgba(40,167,69,.18) }
    .btn-submit:hover{ background:#1f8a38 }

    /* Scrollbar */
    ::-webkit-scrollbar{ width:8px; height:8px }
    ::-webkit-scrollbar-thumb{ background:#b9ccff; border-radius:999px }
    ::-webkit-scrollbar-thumb:hover{ background:#9db9ff }

    /* Helper text */
    .helper{ color:var(--pf-muted); font-size:.9rem; margin-top:4px }
  </style>
</head>

<body>
  <!-- Header -->
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">
      <a href="{{ url_for('index') }}" class="logo d-flex align-items-center me-auto text-decoration-none">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="" />
        <h1 class="sitename ms-2">PathFinder AI</h1>
      </a>
    </div>
  </header>

  <!-- Main -->
  <main class="main">
    <div class="form-wrapper">
      <h2 class="form-title">Career Guidance Questionnaire</h2>

      <!-- Step Indicator -->
      <div id="stepIndicator" class="text-center mb-2">Step 1 of 9 — Personal Information</div>
      <div class="progress mb-3">
        <div class="progress-bar" id="formProgress" style="width: 11%;"></div>
      </div>

      <form id="careerForm" action="/submit_form" method="POST">
        <!-- 1) Personal Information -->
        <div class="form-section active">
          <div class="section-header"><span class="dot"></span>Personal Information</div>
          <div class="question-box">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Full Name</label>
                <input type="text" name="name" class="form-control" placeholder=" " required />
              </div>
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input type="email" name="email" class="form-control" placeholder="eg. you@example.com" required />
              </div>
              <div class="col-md-4">
                <label class="form-label">Age</label>
                <input type="number" name="age" class="form-control" min="10" max="100" placeholder=" " required />
              </div>
              <div class="col-md-4">
                <label class="form-label">Gender</label>
                <select name="gender" class="form-select" required>
                  <option value="">Select</option>
                  <option>Male</option>
                  <option>Female</option>
                  <option>Other</option>
                </select>
              </div>
              <div class="col-md-12">
                <div class="helper"><i class="bi bi-shield-check me-1"></i>We only use this to personalize your result.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 2) Languages -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Languages</div>
          <div class="question-box row">
            {% for lang in ["English","Spanish","French","German","Chinese","Japanese","Arabic","Russian","Telugu","Hindi","Marathi","Tamil","Urdu","Gujarati","Kannada","Malayalam","Odia","Punjabi","Assamese","Manipuri","Chhattisgarhi","Haryanvi","Nepali"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ lang }}" value="1" id="lang_{{ loop.index }}">
                <label for="lang_{{ loop.index }}">{{ lang }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 3) Sports -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Sports</div>
          <div class="question-box row">
            {% for sport in ["Cricket","Football","Hockey","Badminton","Tennis","Volleyball","Kabaddi","Basketball","Athletics","Running","Sprint","Long_Jump","High_Jump","Marathon","Swimming","Boxing","Wrestling","Weightlifting","Table_Tennis","Chess","Cycling","Shooting","Archery","Gymnastics","Rugby","Handball","Martial_Arts","Golf","Baseball","Softball","Motor_Racing","Paragliding","Mountaineering","Yoga","Polo","Surfing","Skating","Skateboarding","Rock_Climbing","Triathlon","Snowboarding","Esports","Drone_Racing","Adventure_Sports","Kite_Fighting","Carrom","Ludo","Snakes_and_Ladders","Mobile_Gaming","Puzzle","Word","Racing","Card_Game"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ sport }}" value="1" id="sport_{{ loop.index }}">
                <label for="sport_{{ loop.index }}">{{ sport.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 4) Academics -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Academics</div>
          <div class="question-box row">
            {% for sub in ["Mathematics","Physics","Chemistry","Biology","Computer_Science","Information_Technology","Electronics","Mechanical_Eng","Civil_Eng","Architecture","Economics","Business_Studies","Accountancy","Commerce","Psychology","Sociology","History","Political_Science","Geography","Philosophy","Law","Medicine","Nursing","Pharmacy","Biotechnology","Environmental_Science","Statistics","Data_Science","Artificial_Intelligence","Robotics","Nanotechnology","Genetics","Microbiology","Zoology","Botany","Journalism","Hospitality_Management","Agricultural_Science","Visual_Arts"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ sub }}" value="1" id="acad_{{ loop.index }}">
                <label for="acad_{{ loop.index }}">{{ sub.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 5) Business & Management -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Business & Management</div>
          <div class="question-box row">
            {% for biz in ["Entrepreneurship","Business_Development","Sales","Marketing","Ecommerce","Event_Management","Real_Estate"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ biz }}" value="1" id="biz_{{ loop.index }}">
                <label for="biz_{{ loop.index }}">{{ biz.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 6) Soft Skills & Personal Attributes -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Soft Skills & Personal Attributes</div>
          <div class="question-box row">
            {% for skill in ["Teamwork","Problem_Solving","Critical_Thinking","Creativity","Time_Management","Adaptability","Empathy","Communication","Negotiation","Attention_to_Detail","Analytical","Curiosity","Open_Mindedness","Confidence","Patience","Perseverance"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ skill }}" value="1" id="soft_{{ loop.index }}">
                <label for="soft_{{ loop.index }}">{{ skill.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 7) Hobbies & Interests -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Hobbies & Interests</div>
          <div class="question-box row">
            {% for hobby in ["Reading","Writing","Travel","Cooking","Photography","Music","Filmmaking","Theatre","Gardening","DIY","Fitness","Fashion","Volunteering","Podcasting","Blogging","Game_Development","Astronomy","Public_Speaking","Teaching","Mentorship","Meditation","Leadership"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ hobby }}" value="1" id="hob_{{ loop.index }}">
                <label for="hob_{{ loop.index }}">{{ hobby.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 8) Arts & Design -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Arts & Design</div>
          <div class="question-box row">
            {% for art in ["Painting","Sketching","Sculpture","Digital_Art","Illustration","Calligraphy","Dance_Classical","Dance_Western","Folk_Dance","Singing_Classical","Singing_Playback","Guitar","Piano","Tabla","Sitar","Pottery","Woodwork","Graphic_Design","Fashion_Design","Interior_Design","Poetry","Creative_Writing","Standup_Comedy","Mimicry","Street_Art"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ art }}" value="1" id="art_{{ loop.index }}">
                <label for="art_{{ loop.index }}">{{ art.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- 9) Film & Media Production -->
        <div class="form-section">
          <div class="section-header"><span class="dot"></span>Film & Media Production</div>
          <div class="question-box row">
            {% for media in ["Film_Music_Composition","Music_Performance","Direction","Cinematography","Acting","Scriptwriting","Editing","Production","Costume_Design","Makeup_Art","VFX","Animation","Color_Grading"] %}
              <div class="col-md-4 opt-col">
                <input type="checkbox" name="{{ media }}" value="1" id="media_{{ loop.index }}">
                <label for="media_{{ loop.index }}">{{ media.replace('_',' ') }}</label>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- Navigation -->
        <div class="form-navigation">
          <button type="button" class="btn btn-prev"><i class="bi bi-arrow-left-circle me-1"></i>Previous</button>
          <button type="button" class="btn btn-next">Next<i class="bi bi-arrow-right-circle ms-1"></i></button>
          <button type="submit" class="btn btn-submit" style="display:none;">Submit</button>
        </div>

      </form>
    </div>
  </main>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='vendor/aos/aos.js') }}"></script>
  <script> if (window.AOS) AOS.init(); </script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const sections = document.querySelectorAll(".form-section");
      const nextBtn = document.querySelector(".btn-next");
      const prevBtn = document.querySelector(".btn-prev");
      const submitBtn = document.querySelector(".btn-submit");
      const progressBar = document.getElementById("formProgress");
      const stepIndicator = document.getElementById("stepIndicator");
      const form = document.getElementById("careerForm");
      let current = 0;

      const titles = [
        "Personal Information",
        "Languages",
        "Sports",
        "Academics",
        "Business & Management",
        "Soft Skills & Personal Attributes",
        "Hobbies & Interests",
        "Arts & Design",
        "Film & Media Production"
      ];

      function updateUI() {
        sections.forEach((sec, i) => sec.classList.toggle("active", i === current));
        prevBtn.style.display = current === 0 ? "none" : "inline-block";
        nextBtn.style.display = current === sections.length - 1 ? "none" : "inline-block";
        submitBtn.style.display = current === sections.length - 1 ? "inline-block" : "none";
        const pct = Math.round(((current + 1) / sections.length) * 100);
        progressBar.style.width = pct + "%";
        stepIndicator.textContent = `Step ${current + 1} of ${sections.length} — ${titles[current]}`;
      }

      function validatePersonalInfo() {
        if (current !== 0) return true;
        const name = form.querySelector('input[name="name"]').value.trim();
        const email = form.querySelector('input[name="email"]').value.trim();
        const age = form.querySelector('input[name="age"]').value.trim();
        const gender = form.querySelector('select[name="gender"]').value.trim();
        if (!name || !email || !age || !gender) {
          alert("Please complete all personal details before continuing.");
          return false;
        }
        // Basic email shape check
        const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        if (!ok) { alert("Please enter a valid email address."); return false; }
        return true;
      }

      nextBtn.addEventListener("click", () => {
        if (!validatePersonalInfo()) return;
        if (current < sections.length - 1) {
          current++;
          updateUI();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      });

      prevBtn.addEventListener("click", () => {
        if (current > 0) {
          current--;
          updateUI();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      });

      // Ensure unchecked checkboxes send "0" so backend has every field
      form.addEventListener("submit", () => {
        const checkboxes = form.querySelectorAll('input[type="checkbox"]');
        checkboxes.forEach(cb => {
          if (!cb.checked) {
            const hidden = document.createElement("input");
            hidden.type = "hidden";
            hidden.name = cb.name;
            hidden.value = "0";
            form.appendChild(hidden);
          } else {
            cb.value = "1";
          }
        });
      });

      updateUI();
    });
  </script>
</body>
</html>